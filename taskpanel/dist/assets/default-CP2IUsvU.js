import{g as W,p as j,u as z,r as V,o as K,I as q,w as B,n as G,a as H,m as P,c as e,f as J,d as $,b as Q,e as X,h as Y,i as Z,j as ee,k as A,l as w,F as T,q as p,s as E,t as s,v as y,x as te,y as _,z as ae,A as le,B as ne,C as oe,D as se,E as ue,G as D,H as re}from"./index-RQMoScwB.js";import{u as ie,V as L,m as ce,a as de,b as me,c as fe,d as ve,e as ge}from"./VMenu-DVZQPxnv.js";import{f as pe,V as Ve,a as ke}from"./VTextField-Br330yhs.js";import{V as be,a as C,b as he,u as ye,m as Se,c as Ce}from"./VGrid-DvsDVF8D.js";import{c as we,V as I,a as O,b as R,d as Ee,e as F,f as xe,g as M}from"./VDivider-CE6lxkIn.js";import{V as Pe}from"./VSnackbar-DadHY1Vw.js";const Ae=j({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ce({origin:"center center",scrollStrategy:"block",transition:{component:de},zIndex:2400})},"VDialog"),N=W()({name:"VDialog",props:Ae(),emits:{"update:modelValue":a=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(a,v){let{emit:i,slots:n}=v;const g=z(a,"modelValue"),{scopeId:c}=ie(),l=V();function u(r){var k,h;const f=r.relatedTarget,b=r.target;if(f!==b&&((k=l.value)!=null&&k.contentEl)&&((h=l.value)!=null&&h.globalTop)&&![document,l.value.contentEl].includes(b)&&!l.value.contentEl.contains(b)){const m=J(l.value.contentEl);if(!m.length)return;const o=m[0],t=m[m.length-1];f===o?t.focus():o.focus()}}K(()=>{document.removeEventListener("focusin",u)}),q&&B(()=>g.value&&a.retainFocus,r=>{r?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function S(){var r;i("afterEnter"),(r=l.value)!=null&&r.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function x(){i("afterLeave")}return B(g,async r=>{var f;r||(await G(),(f=l.value.activatorEl)==null||f.focus({preventScroll:!0}))}),H(()=>{const r=L.filterProps(a),f=P({"aria-haspopup":"dialog"},a.activatorProps),b=P({tabindex:-1},a.contentProps);return e(L,P({ref:l,class:["v-dialog",{"v-dialog--fullscreen":a.fullscreen,"v-dialog--scrollable":a.scrollable},a.class],style:a.style},r,{modelValue:g.value,"onUpdate:modelValue":k=>g.value=k,"aria-modal":"true",activatorProps:f,contentProps:b,height:a.fullscreen?void 0:a.height,width:a.fullscreen?void 0:a.width,maxHeight:a.fullscreen?void 0:a.maxHeight,maxWidth:a.fullscreen?void 0:a.maxWidth,role:"dialog",onAfterEnter:S,onAfterLeave:x},c),{activator:n.activator,default:function(){for(var k=arguments.length,h=new Array(k),m=0;m<k;m++)h[m]=arguments[m];return e(be,{root:"VDialog"},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n,...h)]}})}})}),pe({},l)}}),U=we("v-spacer","div","VSpacer"),Te=$({__name:"SettingsButton",setup(a){const v=Q(),i=X(),n=V(""),g=Y("anum"),c=V(""),l=V(!1),u=V(!1),S=async()=>{const o=await fetch("https://api.tesc.farm/logout",{credentials:"include"});o.ok?ne.push("/login"):(flash.value=o.statusText,snackbar.value=!0)},x=async()=>{const o=await fetch("https://api.tesc.farm/hours/punchoutall",{credentials:"include"});o.ok||(flash.value=o.statusText,snackbar.value=!0),updateWorking(),u.value=!1,selected.value=0},r=()=>{n.value!=""&&(selected.value==-1?clockOff(n.value):clockOn(n.value,selected.value),n.value="")},f=o=>{n.value.length>8&&(r(),o.target.focus())},b=async()=>{const o={barcode:n.value},t=await fetch("https://api.tesc.farm/worker/lookup",{method:"POST",credentials:"include",body:JSON.stringify(o)});t.ok||console.log(t);const d=await t.json();c.value=d.barcode},h=V([{title:"Edit A#",action:()=>{l.value=!0},users:["worker","admin"]},{title:"Stop Tracking All",action:()=>{u.value=!0},users:["admin"]},{title:"Light/Dark Mode",action:()=>{const o=i.global.current.value.dark?"light":"dark";i.global.name.value=o,localStorage.setItem("theme",o)},users:["worker","admin"]},{title:"Logout",action:S,users:["worker","admin"]}]),m=Z(()=>{const o=v.meta.userstatus;return h.value.filter(t=>t.users.includes(o))});return ee(()=>{n.value=localStorage.getItem("anumber"),n.value?(f(),b()):l.value=!0}),(o,t)=>(w(),A(T,null,[e(N,{modelValue:p(l),"onUpdate:modelValue":t[2]||(t[2]=d=>E(l)?l.value=d:null),persistent:!p(n)},{default:s(()=>[e(I,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:s(()=>[e(O,null,{default:s(()=>t[5]||(t[5]=[y("Edit A#")])),_:1}),e(R,null,{default:s(()=>t[6]||(t[6]=[y("Set your A# to track tasks")])),_:1}),e(Ee,null,{default:s(()=>[e(Ve,{id:"anum",ref_key:"anum",ref:g,"prepend-icon":o.result,modelValue:p(n),"onUpdate:modelValue":t[0]||(t[0]=d=>E(n)?n.value=d:null),onInput:f,onKeyup:te(r,["enter"]),hint:"Enter the A# from your student ID",label:"A#"},null,8,["prepend-icon","modelValue"])]),_:1}),e(F,null,{default:s(()=>[p(n)?(w(),_(C,{key:0,class:"ms-auto",text:"Close",onClick:t[1]||(t[1]=d=>l.value=!1)})):ae("",!0),e(U),e(C,{class:"ms-auto",text:"Save",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]),e(N,{modelValue:p(u),"onUpdate:modelValue":t[4]||(t[4]=d=>E(u)?u.value=d:null)},{default:s(()=>[e(I,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:s(()=>[e(O,null,{default:s(()=>t[7]||(t[7]=[y("Punch Out All Active Workers?")])),_:1}),e(R,null,{default:s(()=>t[8]||(t[8]=[y("Are you Sure?")])),_:1}),e(F,null,{default:s(()=>[e(C,{class:"ms-auto",text:"Cancel",onClick:t[3]||(t[3]=d=>u.value=!1)}),e(U),e(C,{class:"ms-auto",text:"Confirm",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(C,{variant:"tonal"},{default:s(()=>[e(he,null,{default:s(()=>t[9]||(t[9]=[y("mdi-cog")])),_:1}),e(me,{activator:"parent"},{default:s(()=>[e(fe,null,{default:s(()=>[(w(!0),A(T,null,le(p(m),d=>(w(),_(ve,{title:d.title,onClick:d.action},null,8,["title","onClick"]))),256))]),_:1})]),_:1})]),_:1})],64))}}),Be=j({scrollable:Boolean,...se(),...Ce(),...Se({tag:"main"})},"VMain"),_e=W()({name:"VMain",props:Be(),setup(a,v){let{slots:i}=v;const{dimensionStyles:n}=ye(a),{mainStyles:g}=oe(),{ssrBootStyles:c}=ge();return H(()=>e(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[g.value,c.value,n.value,a.style]},{default:()=>{var l,u;return[a.scrollable?e("div",{class:"v-main__scroller"},[(l=i.default)==null?void 0:l.call(i)]):(u=i.default)==null?void 0:u.call(i)]}})),{}}}),Me=$({__name:"default",setup(a){const v=V(!1),i=V("error"),n=V("");return(g,c)=>{const l=Te,u=ue("RouterView");return w(),A(T,null,[c[2]||(c[2]=D("a",{href:"#main-content",class:"screen-reader-text skip-to-main-content-link"},"Skip to main content",-1)),e(_e,null,{default:s(()=>[e(ke,{fluid:""},{default:s(()=>[e(xe,{class:"pr-4 pl-4 pt-2"},{default:s(()=>[e(M,null,{default:s(()=>c[1]||(c[1]=[D("h1",null,"Project Tracker",-1)])),_:1}),e(M,{cols:"3",sm:"2",md:"1",align:"right"},{default:s(()=>[e(l)]),_:1})]),_:1})]),_:1}),e(u),e(Pe,{modelValue:p(v),"onUpdate:modelValue":c[0]||(c[0]=S=>E(v)?v.value=S:null),timeout:"2000",location:"top",color:p(i)},{default:s(()=>[y(re(p(n)),1)]),_:1},8,["modelValue","color"])]),_:1})],64)}}});export{Me as default};
