import{_}from"./CardSelector.vue_vue_type_script_setup_true_lang-BeyLbHOb.js";import{d as s}from"./VTextField-FcwR6-Fq.js";import{f as v}from"./tasklist-DG3Mw4yn.js";import{d as k,S as w,b as h,r as n,T as b,j as g,o as y,y as I,l as B,q as u}from"./index-daL3Nt90.js";import"./VMenu-9Go3kMgs.js";import"./VContainer-PrXbU0_v.js";const C=k({__name:"mobile",setup(D){w(),h();const o=n(0),i=n(""),c=n(""),r=n(Array()),l=async()=>{const a=Array.from(await s("/hours/working")),t={};r.value.forEach(e=>{t[e.ID]=0}),a.forEach(e=>{t[e.task_id]++,e.worker.barcode==i.value&&(o.value=e.task_id)}),r.value.forEach(e=>{e.working=t[e.ID],e.selected=e.ID==o.value})},f=async()=>{r.value=Array.from(await s("/tasks")),l()},d=async()=>{const a=await s("/worker/lookup",{barcode:c.value});i.value=a.barcode},p=async a=>{o.value!=a&&(o.value=a,await s("/hours/punch",{barcode:c,task:a}),l())};b(()=>{d(),f()});let m;return g(()=>{c.value=localStorage.getItem("anumber"),m=setInterval(l,6e4)}),y(()=>{clearInterval(m)}),(a,t)=>{const e=_;return B(),I(e,{search:"",tracking:"",items:u(r),focus:u(v),onSelect:p,selected:u(o)},null,8,["items","focus","selected"])}}});export{C as default};
