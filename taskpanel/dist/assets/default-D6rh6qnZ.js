import{g as N,p as U,u as $,r as g,o as z,I as K,w as A,n as q,a as W,m as w,c as t,f as G,d as j,b as J,e as Q,h as X,i as Y,j as x,k as E,F as P,l as p,q as h,s as o,t as b,v as Z,x as B,y as ee,z as te,A as ae,B as ne,C as le,D as oe,E as T,G as se}from"./index-CHZdWgAM.js";import{u as ue,V as _,m as re,a as ie,b as ce,c as de,d as fe,e as me}from"./VMenu-qtkikoXf.js";import{f as ve,V as Ve,a as pe}from"./VTextField-BpdqMzPS.js";import{V as ge,a as C,b as ke,u as be,m as ye,c as Se}from"./VGrid-BlS_v7Lu.js";import{c as Ce,V as D,a as L,b as I,d as Ee,e as O,f as he,g as R}from"./VDivider-DLQHfrc3.js";import{V as we}from"./VSnackbar-DeFgVnS-.js";const xe=U({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...re({origin:"center center",scrollStrategy:"block",transition:{component:ie},zIndex:2400})},"VDialog"),F=N()({name:"VDialog",props:xe(),emits:{"update:modelValue":a=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(a,f){let{emit:n,slots:c}=f;const m=$(a,"modelValue"),{scopeId:r}=ue(),l=g();function d(i){var V,s;const v=i.relatedTarget,k=i.target;if(v!==k&&((V=l.value)!=null&&V.contentEl)&&((s=l.value)!=null&&s.globalTop)&&![document,l.value.contentEl].includes(k)&&!l.value.contentEl.contains(k)){const e=G(l.value.contentEl);if(!e.length)return;const u=e[0],H=e[e.length-1];v===u?H.focus():u.focus()}}z(()=>{document.removeEventListener("focusin",d)}),K&&A(()=>m.value&&a.retainFocus,i=>{i?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0});function y(){var i;n("afterEnter"),(i=l.value)!=null&&i.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function S(){n("afterLeave")}return A(m,async i=>{var v;i||(await q(),(v=l.value.activatorEl)==null||v.focus({preventScroll:!0}))}),W(()=>{const i=_.filterProps(a),v=w({"aria-haspopup":"dialog"},a.activatorProps),k=w({tabindex:-1},a.contentProps);return t(_,w({ref:l,class:["v-dialog",{"v-dialog--fullscreen":a.fullscreen,"v-dialog--scrollable":a.scrollable},a.class],style:a.style},i,{modelValue:m.value,"onUpdate:modelValue":V=>m.value=V,"aria-modal":"true",activatorProps:v,contentProps:k,height:a.fullscreen?void 0:a.height,width:a.fullscreen?void 0:a.width,maxHeight:a.fullscreen?void 0:a.maxHeight,maxWidth:a.fullscreen?void 0:a.maxWidth,role:"dialog",onAfterEnter:y,onAfterLeave:S},r),{activator:c.activator,default:function(){for(var V=arguments.length,s=new Array(V),e=0;e<V;e++)s[e]=arguments[e];return t(ge,{root:"VDialog"},{default:()=>{var u;return[(u=c.default)==null?void 0:u.call(c,...s)]}})}})}),ve({},l)}}),M=Ce("v-spacer","div","VSpacer"),Pe=j({__name:"SettingsButton",setup(a){const f=J(),n=g(""),c=Q("anum"),m=g(""),r=g(!1),l=g(!1),d=async()=>{const s=await fetch("https://api.tesc.farm/logout",{credentials:"include"});s.ok?ae.push("/login"):(flash.value=s.statusText,snackbar.value=!0)},y=async()=>{const s=await fetch("https://api.tesc.farm/hours/punchoutall",{credentials:"include"});s.ok||(flash.value=s.statusText,snackbar.value=!0),updateWorking(),l.value=!1,selected.value=0},S=()=>{n.value!=""&&(selected.value==-1?clockOff(n.value):clockOn(n.value,selected.value),n.value="")},i=s=>{n.value.length>8&&(S(),s.target.focus())},v=async()=>{const s={barcode:n.value},e=await fetch("https://api.tesc.farm/worker/lookup",{method:"POST",credentials:"include",body:JSON.stringify(s)});e.ok||console.log(e);const u=await e.json();m.value=u.barcode},k=g([{title:"Edit A#",action:()=>{r.value=!0},users:["worker","admin"]},{title:"Stop Tracking All",action:()=>{l.value=!0},users:["admin"]},{title:"Logout",action:d,users:["worker","admin"]}]),V=X(()=>{const s=f.meta.userstatus;return k.value.filter(e=>e.users.includes(s))});return Y(()=>{n.value=localStorage.getItem("anumber"),n.value?(i(),v()):r.value=!0}),(s,e)=>(E(),x(P,null,[t(F,{modelValue:p(r),"onUpdate:modelValue":e[2]||(e[2]=u=>h(r)?r.value=u:null),persistent:!p(n)},{default:o(()=>[t(D,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:o(()=>[t(L,null,{default:o(()=>e[5]||(e[5]=[b("Edit A#")])),_:1}),t(I,null,{default:o(()=>e[6]||(e[6]=[b("Set your A# to track tasks")])),_:1}),t(Ee,null,{default:o(()=>[t(Ve,{id:"anum",ref_key:"anum",ref:c,"prepend-icon":s.result,modelValue:p(n),"onUpdate:modelValue":e[0]||(e[0]=u=>h(n)?n.value=u:null),onInput:i,onKeyup:Z(S,["enter"]),hint:"Enter the A# from your student ID",label:"A#"},null,8,["prepend-icon","modelValue"])]),_:1}),t(O,null,{default:o(()=>[p(n)?(E(),B(C,{key:0,class:"ms-auto",text:"Close",onClick:e[1]||(e[1]=u=>r.value=!1)})):ee("",!0),t(M),t(C,{class:"ms-auto",text:"Save",onClick:S})]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]),t(F,{modelValue:p(l),"onUpdate:modelValue":e[4]||(e[4]=u=>h(l)?l.value=u:null)},{default:o(()=>[t(D,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:o(()=>[t(L,null,{default:o(()=>e[7]||(e[7]=[b("Punch Out All Active Workers?")])),_:1}),t(I,null,{default:o(()=>e[8]||(e[8]=[b("Are you Sure?")])),_:1}),t(O,null,{default:o(()=>[t(C,{class:"ms-auto",text:"Cancel",onClick:e[3]||(e[3]=u=>l.value=!1)}),t(M),t(C,{class:"ms-auto",text:"Confirm",onClick:y})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,{variant:"tonal"},{default:o(()=>[t(ke,null,{default:o(()=>e[9]||(e[9]=[b("mdi-cog")])),_:1}),t(ce,{activator:"parent"},{default:o(()=>[t(de,null,{default:o(()=>[(E(!0),x(P,null,te(p(V),u=>(E(),B(fe,{title:u.title,onClick:u.action},null,8,["title","onClick"]))),256))]),_:1})]),_:1})]),_:1})],64))}}),Ae=U({scrollable:Boolean,...le(),...Se(),...ye({tag:"main"})},"VMain"),Be=N()({name:"VMain",props:Ae(),setup(a,f){let{slots:n}=f;const{dimensionStyles:c}=be(a),{mainStyles:m}=ne(),{ssrBootStyles:r}=me();return W(()=>t(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[m.value,r.value,c.value,a.style]},{default:()=>{var l,d;return[a.scrollable?t("div",{class:"v-main__scroller"},[(l=n.default)==null?void 0:l.call(n)]):(d=n.default)==null?void 0:d.call(n)]}})),{}}}),Re=j({__name:"default",setup(a){const f=g(!1),n=g("error"),c=g("");return(m,r)=>{const l=Pe,d=oe("RouterView");return E(),x(P,null,[r[2]||(r[2]=T("a",{href:"#main-content",class:"screen-reader-text skip-to-main-content-link"},"Skip to main content",-1)),t(Be,null,{default:o(()=>[t(pe,{fluid:""},{default:o(()=>[t(he,null,{default:o(()=>[t(R,null,{default:o(()=>r[1]||(r[1]=[T("h1",null,"Project Tracker",-1)])),_:1}),t(R,{cols:"3",md:"1",align:"right"},{default:o(()=>[t(l)]),_:1})]),_:1})]),_:1}),t(d),t(we,{modelValue:p(f),"onUpdate:modelValue":r[0]||(r[0]=y=>h(f)?f.value=y:null),timeout:"2000",location:"top",color:p(n)},{default:o(()=>[b(se(p(c)),1)]),_:1},8,["modelValue","color"])]),_:1})],64)}}});export{Re as default};
