import{d as V,f as u,B as g,C as h,j as q,t as k,o as x,w as c,e as f,c as m,z as B,q as n,n as w,y as C,x as b}from"./index-ZVoXBEJl.js";import{V as v,a as N}from"./VTextField-BvLousLF.js";import{V as P}from"./VBtn-qhzDO-fz.js";import"./tag-B2JrnWcc.js";const R={class:"error"},L=V({__name:"login",setup(S){const r=u(""),a=u(""),s=u(""),t=u(!1),i={required:o=>!!o||"Required.",min:o=>o.length>=8||"Minimum 8 characters"},y=g(),p=h(),d=async()=>{if(!r.value||!a.value){s.value="Both Username and Password are required";return}if(a.value.length<8){s.value="Password must be 8 or more characters";return}const o={username:r.value,password:a.value},e=await fetch("https://api.tesc.farm/login",{method:"POST",credentials:"include",body:JSON.stringify(o)});if(!e.ok){console.log(e),s.value="Login rejected";return}y.push({path:"/mobile"})};return q(()=>{p.query.w&&(r.value="worker",a.value=p.query.w,d())}),(o,e)=>(x(),k(N,null,{default:c(()=>[e[4]||(e[4]=f("h1",null,"Worker Login",-1)),f("p",R,B(n(s)),1),m(v,{id:"username",modelValue:n(r),"onUpdate:modelValue":e[0]||(e[0]=l=>w(r)?r.value=l:null),hint:"Enter the name of your account",label:"Username",name:"username",rules:[i.required]},null,8,["modelValue","rules"]),m(v,{modelValue:n(a),"onUpdate:modelValue":e[1]||(e[1]=l=>w(a)?a.value=l:null),"append-icon":n(t)?"mdi-eye":"mdi-eye-off",rules:[i.required,i.min],type:n(t)?"text":"password",hint:"At least 8 characters",label:"Password",name:"password",counter:"","onClick:append":e[2]||(e[2]=l=>t.value=!n(t)),onKeyup:C(d,["enter"])},null,8,["modelValue","append-icon","rules","type"]),m(P,{onClick:d,variant:"tonal"},{default:c(()=>e[3]||(e[3]=[b("Sign In")])),_:1})]),_:1}))}});export{L as default};
