import{g as j,p as $,u as q,r as p,o as G,I as J,w as _,n as Q,a as z,m as P,c as e,f as X,d as K,b as Y,e as Z,h as ee,i as te,j as ae,k as B,l as E,F as T,q as V,s as w,t as n,v as y,x as le,y as L,z as ne,A as oe,B as se,C as ue,D as re,E as ie,G as D,H as ce}from"./index-BPadVx_3.js";import{a as I}from"./apicall-B_5ENNFL.js";import{u as de,V as R,m as me,a as fe,b as ve,c as ge,d as Ve,e as pe}from"./VMenu-BIEtxcDn.js";import{f as ke,V as be,a as xe}from"./VTextField-_HiXIyNs.js";import{V as Se,a as C,b as he,u as ye,m as Ce,c as Ee}from"./VGrid-pi-9tooK.js";import{c as we,V as F,a as M,b as N,d as Ae,e as O,f as Pe,g as U}from"./VDivider-DWiRGwIx.js";import{V as Be}from"./VSnackbar-CMIVx_Kw.js";const Te=$({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...me({origin:"center center",scrollStrategy:"block",transition:{component:fe},zIndex:2400})},"VDialog"),H=j()({name:"VDialog",props:Te(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,k){let{emit:u,slots:l}=k;const m=q(t,"modelValue"),{scopeId:i}=de(),o=p();function s(r){var b,S;const v=r.relatedTarget,h=r.target;if(v!==h&&((b=o.value)!=null&&b.contentEl)&&((S=o.value)!=null&&S.globalTop)&&![document,o.value.contentEl].includes(h)&&!o.value.contentEl.contains(h)){const c=X(o.value.contentEl);if(!c.length)return;const x=c[0],d=c[c.length-1];v===x?d.focus():x.focus()}}G(()=>{document.removeEventListener("focusin",s)}),J&&_(()=>m.value&&t.retainFocus,r=>{r?document.addEventListener("focusin",s):document.removeEventListener("focusin",s)},{immediate:!0});function f(){var r;u("afterEnter"),(r=o.value)!=null&&r.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function A(){u("afterLeave")}return _(m,async r=>{var v;r||(await Q(),(v=o.value.activatorEl)==null||v.focus({preventScroll:!0}))}),z(()=>{const r=R.filterProps(t),v=P({"aria-haspopup":"dialog"},t.activatorProps),h=P({tabindex:-1},t.contentProps);return e(R,P({ref:o,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},r,{modelValue:m.value,"onUpdate:modelValue":b=>m.value=b,"aria-modal":"true",activatorProps:v,contentProps:h,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:f,onAfterLeave:A},i),{activator:l.activator,default:function(){for(var b=arguments.length,S=new Array(b),c=0;c<b;c++)S[c]=arguments[c];return e(Se,{root:"VDialog"},{default:()=>{var x;return[(x=l.default)==null?void 0:x.call(l,...S)]}})}})}),ke({},o)}}),W=we("v-spacer","div","VSpacer"),_e=K({__name:"SettingsButton",setup(t){const k=Y(),u=Z(),l=p(""),m=p("mdi-form-textbox"),i=ee("anum"),o=p(""),s=p(!1),f=p(!1),A=async()=>{const d=await fetch("https://api.tesc.farm/logout",{credentials:"include"});d.ok?se.push("/login"):(flash.value=d.statusText,snackbar.value=!0)},r=async()=>{await I("/hours/punchoutall"),f.value=!1,location.reload()},v=async()=>{const d=await I("/worker/lookup",{barcode:l.value});o.value=d.barcode},b=p([{title:"Edit A#",action:()=>{s.value=!0},users:["worker","admin"]},{title:"Stop Tracking All",action:()=>{f.value=!0},users:["admin"]},{title:"Light/Dark Mode",action:()=>{const d=u.global.current.value.dark?"light":"dark";u.global.name.value=d,localStorage.setItem("theme",d)},users:["worker","admin","all"]},{title:"Logout",action:A,users:["worker","admin"]}]),S=te(()=>{const d=k.meta.userstatus;return b.value.filter(a=>a.users.includes(d)||a.users.includes("all"))}),c=()=>{l.value!=""&&(localStorage.setItem("anumber",l.value),s.value=!1,v())},x=()=>{l.value.length==9&&l.value[0]=="A"&&!isNaN(Number(l.value.substring(1)))?m.value="mdi-check-circle":m.value="mdi-form-textbox"};return ae(()=>{l.value=localStorage.getItem("anumber"),l.value?(x(),v()):s.value=!0}),(d,a)=>(E(),B(T,null,[e(H,{modelValue:V(s),"onUpdate:modelValue":a[2]||(a[2]=g=>w(s)?s.value=g:null),persistent:!V(l)},{default:n(()=>[e(F,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:n(()=>[e(M,null,{default:n(()=>a[5]||(a[5]=[y("Edit A#")])),_:1}),e(N,null,{default:n(()=>a[6]||(a[6]=[y("Set your A# to track tasks")])),_:1}),e(Ae,null,{default:n(()=>[e(be,{id:"anum",ref_key:"anum",ref:i,"prepend-icon":V(m),modelValue:V(l),"onUpdate:modelValue":a[0]||(a[0]=g=>w(l)?l.value=g:null),onInput:x,onKeyup:le(c,["enter"]),hint:"Enter the A# from your student ID",label:"A#"},null,8,["prepend-icon","modelValue"])]),_:1}),e(O,null,{default:n(()=>[V(l)?(E(),L(C,{key:0,class:"ms-auto",text:"Close",onClick:a[1]||(a[1]=g=>s.value=!1)})):ne("",!0),e(W),e(C,{class:"ms-auto",text:"Save",onClick:c})]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]),e(H,{modelValue:V(f),"onUpdate:modelValue":a[4]||(a[4]=g=>w(f)?f.value=g:null)},{default:n(()=>[e(F,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:n(()=>[e(M,null,{default:n(()=>a[7]||(a[7]=[y("Punch Out All Active Workers?")])),_:1}),e(N,null,{default:n(()=>a[8]||(a[8]=[y("Are you Sure?")])),_:1}),e(O,null,{default:n(()=>[e(C,{class:"ms-auto",text:"Cancel",onClick:a[3]||(a[3]=g=>f.value=!1)}),e(W),e(C,{class:"ms-auto",text:"Confirm",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(C,{variant:"tonal"},{default:n(()=>[e(he,null,{default:n(()=>a[9]||(a[9]=[y("mdi-cog")])),_:1}),e(ve,{activator:"parent"},{default:n(()=>[e(ge,null,{default:n(()=>[(E(!0),B(T,null,oe(V(S),g=>(E(),L(Ve,{title:g.title,onClick:g.action},null,8,["title","onClick"]))),256))]),_:1})]),_:1})]),_:1})],64))}}),Le=$({scrollable:Boolean,...re(),...Ee(),...Ce({tag:"main"})},"VMain"),De=j()({name:"VMain",props:Le(),setup(t,k){let{slots:u}=k;const{dimensionStyles:l}=ye(t),{mainStyles:m}=ue(),{ssrBootStyles:i}=pe();return z(()=>e(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[m.value,i.value,l.value,t.style]},{default:()=>{var o,s;return[t.scrollable?e("div",{class:"v-main__scroller"},[(o=u.default)==null?void 0:o.call(u)]):(s=u.default)==null?void 0:s.call(u)]}})),{}}}),He=K({__name:"default",setup(t){const k=p(!1),u=p("error"),l=p("");return(m,i)=>{const o=_e,s=ie("RouterView");return E(),B(T,null,[i[2]||(i[2]=D("a",{href:"#main-content",class:"screen-reader-text skip-to-main-content-link"},"Skip to main content",-1)),e(De,null,{default:n(()=>[e(xe,{fluid:""},{default:n(()=>[e(Pe,{class:"pr-4 pl-4 pt-2"},{default:n(()=>[e(U,null,{default:n(()=>i[1]||(i[1]=[D("h1",null,"Project and Labor Tracker",-1)])),_:1}),e(U,{cols:"3",sm:"2",md:"1",align:"right"},{default:n(()=>[e(o)]),_:1})]),_:1})]),_:1}),e(s),e(Be,{modelValue:V(k),"onUpdate:modelValue":i[0]||(i[0]=f=>w(k)?k.value=f:null),timeout:"2000",location:"top",color:V(u)},{default:n(()=>[y(ce(V(l)),1)]),_:1},8,["modelValue","color"])]),_:1})],64)}}});export{He as default};
