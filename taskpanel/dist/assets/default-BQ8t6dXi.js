import{g as M,p as F,u as X,r as b,o as ve,I as ge,w as B,n as Z,a as O,m as E,c as t,f as ke,d as ee,b as Ve,e as be,h as ye,i as te,j as ae,k as I,l as A,F as R,q as S,s as L,t as s,v as C,x as pe,y as H,z as he,A as Se,B as we,C as ne,D as Pe,E as Ce,G as N,H as xe,J as Te,K as Ae,L as Ee,M as _e,N as Le,O as Be,V as De,P as K,Q as Ie,R as Re}from"./index-daL3Nt90.js";import{f as le,V as oe,a as Ne,b as T,c as Me,d as W,u as Fe,m as Oe,e as Ue,g as je,h as He,i as Ke,j as We,k as $e,l as Ye,n as ze,o as Ge,p as qe}from"./VTextField-FcwR6-Fq.js";import{u as se,V as D,m as ue,a as Je,c as Qe,b as $,d as Y,e as z,f as Xe,g as G,h as Ze,i as et,j as tt,k as at,l as nt,n as q}from"./VMenu-9Go3kMgs.js";import{V as lt}from"./VContainer-PrXbU0_v.js";const ot=F({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ue({origin:"center center",scrollStrategy:"block",transition:{component:Je},zIndex:2400})},"VDialog"),J=M()({name:"VDialog",props:ot(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,r){let{emit:n,slots:a}=r;const m=X(e,"modelValue"),{scopeId:c}=se(),o=b();function u(i){var y,p;const f=i.relatedTarget,w=i.target;if(f!==w&&((y=o.value)!=null&&y.contentEl)&&((p=o.value)!=null&&p.globalTop)&&![document,o.value.contentEl].includes(w)&&!o.value.contentEl.contains(w)){const v=ke(o.value.contentEl);if(!v.length)return;const h=v[0],k=v[v.length-1];f===h?k.focus():h.focus()}}ve(()=>{document.removeEventListener("focusin",u)}),ge&&B(()=>m.value&&e.retainFocus,i=>{i?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function d(){var i;n("afterEnter"),(i=o.value)!=null&&i.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function P(){n("afterLeave")}return B(m,async i=>{var f;i||(await Z(),(f=o.value.activatorEl)==null||f.focus({preventScroll:!0}))}),O(()=>{const i=D.filterProps(e),f=E({"aria-haspopup":"dialog"},e.activatorProps),w=E({tabindex:-1},e.contentProps);return t(D,E({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},i,{modelValue:m.value,"onUpdate:modelValue":y=>m.value=y,"aria-modal":"true",activatorProps:f,contentProps:w,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:d,onAfterLeave:P},c),{activator:a.activator,default:function(){for(var y=arguments.length,p=new Array(y),v=0;v<y;v++)p[v]=arguments[v];return t(oe,{root:"VDialog"},{default:()=>{var h;return[(h=a.default)==null?void 0:h.call(a,...p)]}})}})}),le({},o)}}),Q=Qe("v-spacer","div","VSpacer"),st=ee({__name:"SettingsButton",setup(e){const r=Ve(),n=be(),a=b(""),m=b("mdi-form-textbox"),c=ye("anum"),o=b(""),u=b(!1),d=b(!1),P=async()=>{const k=await fetch("https://api.tesc.farm/logout",{credentials:"include"});k.ok?we.push("/login"):(flash.value=k.statusText,snackbar.value=!0)},i=async()=>{await W("/hours/punchoutall"),d.value=!1,location.reload()},f=async()=>{const k=await W("/worker/lookup",{barcode:a.value});o.value=k.barcode},y=b([{title:"Edit A#",action:()=>{u.value=!0},users:["worker","admin"]},{title:"Stop Tracking All",action:()=>{d.value=!0},users:["admin"]},{title:"Light/Dark Mode",action:()=>{const k=n.global.current.value.dark?"light":"dark";n.global.name.value=k,localStorage.setItem("theme",k)},users:["worker","admin","all"]},{title:"Logout",action:P,users:["worker","admin"]}]),p=te(()=>{const k=r.meta.userstatus;return y.value.filter(l=>l.users.includes(k)||l.users.includes("all"))}),v=()=>{a.value!=""&&(localStorage.setItem("anumber",a.value),u.value=!1,f())},h=()=>{a.value.length==9&&a.value[0]=="A"&&!isNaN(Number(a.value.substring(1)))?m.value="mdi-check-circle":m.value="mdi-form-textbox"};return ae(()=>{a.value=localStorage.getItem("anumber"),a.value?(h(),f()):u.value=!0}),(k,l)=>(A(),I(R,null,[t(J,{modelValue:S(u),"onUpdate:modelValue":l[2]||(l[2]=g=>L(u)?u.value=g:null),persistent:!S(a)},{default:s(()=>[t($,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:s(()=>[t(Y,null,{default:s(()=>l[5]||(l[5]=[C("Edit A#")])),_:1}),t(z,null,{default:s(()=>l[6]||(l[6]=[C("Set your A# to track tasks")])),_:1}),t(Xe,null,{default:s(()=>[t(Ne,{id:"anum",ref_key:"anum",ref:c,"prepend-icon":S(m),modelValue:S(a),"onUpdate:modelValue":l[0]||(l[0]=g=>L(a)?a.value=g:null),onInput:h,onKeyup:pe(v,["enter"]),hint:"Enter the A# from your student ID",label:"A#"},null,8,["prepend-icon","modelValue"])]),_:1}),t(G,null,{default:s(()=>[S(a)?(A(),H(T,{key:0,class:"ms-auto",text:"Close",onClick:l[1]||(l[1]=g=>u.value=!1)})):he("",!0),t(Q),t(T,{class:"ms-auto",text:"Save",onClick:v})]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]),t(J,{modelValue:S(d),"onUpdate:modelValue":l[4]||(l[4]=g=>L(d)?d.value=g:null)},{default:s(()=>[t($,{class:"ma-auto w-100","max-width":"400","prepend-icon":"mdi-settings"},{default:s(()=>[t(Y,null,{default:s(()=>l[7]||(l[7]=[C("Punch Out All Active Workers?")])),_:1}),t(z,null,{default:s(()=>l[8]||(l[8]=[C("Are you Sure?")])),_:1}),t(G,null,{default:s(()=>[t(T,{class:"ms-auto",text:"Cancel",onClick:l[3]||(l[3]=g=>d.value=!1)}),t(Q),t(T,{class:"ms-auto",text:"Confirm",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(T,{variant:"tonal"},{default:s(()=>[t(Me,null,{default:s(()=>l[9]||(l[9]=[C("mdi-cog")])),_:1}),t(Ze,{activator:"parent"},{default:s(()=>[t(et,null,{default:s(()=>[(A(!0),I(R,null,Se(S(p),g=>(A(),H(tt,{title:g.title,onClick:g.action},null,8,["title","onClick"]))),256))]),_:1})]),_:1})]),_:1})],64))}}),ut=F({scrollable:Boolean,...Pe(),...Ue(),...Oe({tag:"main"})},"VMain"),rt=M()({name:"VMain",props:ut(),setup(e,r){let{slots:n}=r;const{dimensionStyles:a}=Fe(e),{mainStyles:m}=ne(),{ssrBootStyles:c}=at();return O(()=>t(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[m.value,c.value,a.value,e.style]},{default:()=>{var o,u;return[e.scrollable?t("div",{class:"v-main__scroller"},[(o=n.default)==null?void 0:o.call(n)]):(u=n.default)==null?void 0:u.call(n)]}})),{}}});function it(e){const r=N(e());let n=-1;function a(){clearInterval(n)}function m(){a(),Z(()=>r.value=e())}function c(o){const u=o?getComputedStyle(o):{transitionDuration:.2},d=parseFloat(u.transitionDuration)*1e3||200;if(a(),r.value<=0)return;const P=performance.now();n=window.setInterval(()=>{const i=performance.now()-P+d;r.value=Math.max(e()-i,0),r.value<=0&&a()},d)}return Be(a),{clear:a,time:r,start:c,reset:m}}const ct=F({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ze({location:"bottom"}),...Ye(),...$e(),...We(),...Le(),..._e(ue({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),mt=M()({name:"VSnackbar",props:ct(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:n}=r;const a=X(e,"modelValue"),{positionClasses:m}=je(e),{scopeId:c}=se(),{themeClasses:o}=Ce(e),{colorClasses:u,colorStyles:d,variantClasses:P}=He(e),{roundedClasses:i}=Ke(e),f=it(()=>Number(e.timeout)),w=b(),y=b(),p=N(!1),v=N(0),h=b(),k=xe(De,void 0);Te(()=>!!k,()=>{const V=ne();Ae(()=>{h.value=V.mainStyles.value})}),B(a,g),B(()=>e.timeout,g),ae(()=>{a.value&&g()});let l=-1;function g(){f.reset(),window.clearTimeout(l);const V=Number(e.timeout);if(!a.value||V===-1)return;const x=Ee(y.value);f.start(x),l=window.setTimeout(()=>{a.value=!1},V)}function re(){f.reset(),window.clearTimeout(l)}function ie(){p.value=!0,re()}function U(){p.value=!1,g()}function ce(V){v.value=V.touches[0].clientY}function me(V){Math.abs(v.value-V.changedTouches[0].clientY)>50&&(a.value=!1)}function de(){p.value&&U()}const fe=te(()=>e.location.split(" ").reduce((V,x)=>(V[`v-snackbar--${x}`]=!0,V),{}));return O(()=>{const V=D.filterProps(e),x=!!(n.default||n.text||e.text);return t(D,E({ref:w,class:["v-snackbar",{"v-snackbar--active":a.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},fe.value,m.value,e.class],style:[h.value,e.style]},V,{modelValue:a.value,"onUpdate:modelValue":_=>a.value=_,contentProps:E({class:["v-snackbar__wrapper",o.value,u.value,i.value,P.value],style:[d.value],onPointerenter:ie,onPointerleave:U},V.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:ce,onTouchend:me,onAfterLeave:de},c),{default:()=>{var _,j;return[Ge(!1,"v-snackbar"),e.timer&&!p.value&&t("div",{key:"timer",class:"v-snackbar__timer"},[t(qe,{ref:y,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":f.time.value},null)]),x&&t("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((_=n.text)==null?void 0:_.call(n))??e.text,(j=n.default)==null?void 0:j.call(n)]),n.actions&&t(oe,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[t("div",{class:"v-snackbar__actions"},[n.actions({isActive:a})])]})]},activator:n.activator})}),le({},w)}}),kt=ee({__name:"default",setup(e){const r=b(!1),n=b("error"),a=b("");return(m,c)=>{const o=st,u=Ie("RouterView");return A(),I(R,null,[c[2]||(c[2]=K("a",{href:"#main-content",class:"screen-reader-text skip-to-main-content-link"},"Skip to main content",-1)),t(rt,null,{default:s(()=>[t(lt,{fluid:""},{default:s(()=>[t(nt,{class:"pr-4 pl-4 pt-2"},{default:s(()=>[t(q,null,{default:s(()=>c[1]||(c[1]=[K("h1",null,"Project and Labor Tracker",-1)])),_:1}),t(q,{cols:"3",sm:"2",md:"1",align:"right"},{default:s(()=>[t(o)]),_:1})]),_:1})]),_:1}),t(u),t(mt,{modelValue:S(r),"onUpdate:modelValue":c[0]||(c[0]=d=>L(r)?r.value=d:null),timeout:"2000",location:"top",color:S(n)},{default:s(()=>[C(Re(S(a)),1)]),_:1},8,["modelValue","color"])]),_:1})],64)}}});export{kt as default};
