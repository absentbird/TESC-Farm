import{_ as I}from"./CardSelector.vue_vue_type_script_setup_true_lang-CmivaplB.js";import{d as D,r as c,h as V,i as E,j as A,o as C,k,l as h,c as _,z as F,q as s,x as y,s as N,F as B,n as K}from"./index-DsmxeAVp.js";import{f as S}from"./tasklist-DG3Mw4yn.js";import{a as j,d as i}from"./VTextField-Bzyb5WDc.js";import"./VMenu-BdpgoByb.js";import"./VContainer-BAseW2YN.js";const O={key:0,id:"anumfloat",class:"align-self-end"},G=D({__name:"index",setup(R){const o=c(0),n=c(""),r=c(Array()),l=c(""),m=V("anum"),g=E(()=>o.value==0?"None":o.value<0?"Stop Tracking Time":r.value.find(a=>a.ID===o.value).name),f=a=>{o.value=a,a!=0&&K(()=>{var e;(e=m.value)==null||e.focus()})},w=async()=>{r.value=await i("/tasks"),u()},u=async()=>{const a=Array.from(await i("/hours/working")),e={};r.value.forEach(t=>{e[t.ID]=0}),a.forEach(t=>{e[t.task_id]++,t.worker.barcode==hash.value&&(o.value=t.task_id)}),r.value.forEach(t=>{t.working=e[t.ID],t.selected=t.ID==o.value})},x=async(a,e)=>{await i("/hours/punch",{barcode:a,task:e}),l.value="mdi-check-circle",setTimeout(()=>{l.value="mdi-form-textbox"},3e3),u()},b=async a=>{await i("/hours/punch",{barcode:n}),l.value="mdi-check-circle",setTimeout(()=>{l.value="mdi-form-textbox"},3e3),u()},d=()=>{n.value!=""&&(o.value==-1?b(n.value):x(n.value,o.value),n.value="")},T=a=>{n.value.length>8&&(d(),a.target.focus())};let v;return A(()=>{w(),v=setInterval(u,6e4)}),C(()=>{clearInterval(v)}),(a,e)=>{const t=I;return h(),k(B,null,[_(t,{search:"",tracking:"",withfloat:"",items:s(r),focus:s(S),onSelect:f,selected:s(o)},null,8,["items","focus","selected"]),s(o)?(h(),k("div",O,[_(j,{id:"anum",ref_key:"anum",ref:m,"prepend-icon":s(l),modelValue:s(n),"onUpdate:modelValue":e[0]||(e[0]=p=>N(n)?n.value=p:null),onInput:T,onKeyup:y(d,["enter"]),onKeydown:e[1]||(e[1]=y(p=>f(0),["esc"])),hint:"Enter the A# from your student ID",label:s(g),autocomplete:"off"},null,8,["prepend-icon","modelValue","label"])])):F("",!0)],64)}}});export{G as default};
