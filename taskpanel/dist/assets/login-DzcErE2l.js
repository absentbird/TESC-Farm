import{d as y,r as u,S as g,B as h,h as k,v as q,j as x,l as c,D as f,c as m,E as B,k as s,t as v,s as b,q as C}from"./index-jRNJUFEo.js";import{V as w}from"./VTextField-C889d65x.js";import{a as S}from"./VGrid-LpqclO5D.js";import{V as N}from"./VContainer-C8fQdCzf.js";const P={class:"error"},E=y({__name:"login",setup(R){const a=u(""),r=u(""),t=u(""),n=u(!1),i={required:o=>!!o||"Required.",min:o=>o.length>=8||"Minimum 8 characters"},V=g(),p=h(),d=async()=>{if(!a.value||!r.value){t.value="Both Username and Password are required";return}if(r.value.length<8){t.value="Password must be 8 or more characters";return}const o={username:a.value,password:r.value},e=await fetch("https://api.tesc.farm/login",{method:"POST",credentials:"include",body:JSON.stringify(o)});if(!e.ok){console.log(e),t.value="Login rejected";return}V.push({path:"/mobile"})};return k(()=>{p.query.w&&(a.value="worker",r.value=p.query.w,d())}),(o,e)=>(x(),q(N,null,{default:c(()=>[e[4]||(e[4]=f("h1",null,"Worker Login",-1)),f("p",P,B(s(t)),1),m(w,{id:"username",modelValue:s(a),"onUpdate:modelValue":e[0]||(e[0]=l=>v(a)?a.value=l:null),hint:"Enter the name of your account",label:"Username",name:"username",rules:[i.required]},null,8,["modelValue","rules"]),m(w,{modelValue:s(r),"onUpdate:modelValue":e[1]||(e[1]=l=>v(r)?r.value=l:null),"append-icon":s(n)?"mdi-eye":"mdi-eye-off",rules:[i.required,i.min],type:s(n)?"text":"password",hint:"At least 8 characters",label:"Password",name:"password",counter:"","onClick:append":e[2]||(e[2]=l=>n.value=!s(n)),onKeyup:b(d,["enter"])},null,8,["modelValue","append-icon","rules","type"]),m(S,{onClick:d,variant:"tonal"},{default:c(()=>e[3]||(e[3]=[C("Sign In")])),_:1})]),_:1}))}});export{E as default};
